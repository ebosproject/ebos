<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui" 
	xmlns:eb="http://ebos.com.ec/ui">

	<eb:layout id="layHome" widgetVar="fullLayoutWidget"
		options="#{layoutMB.layoutOptionsHome}">

		<ui:include id="pnlTimeout" src="../panels/pnlTimeout.xhtml" />
		<ui:include id="pnlChangePwd" src="../panels/pnlChangePswd.xhtml" />

		<eb:layoutPane id="lyNorth" position="north">
			<ui:include src="north.xhtml" />
		</eb:layoutPane>

		<eb:layoutPane id="lyWest" position="west">
			<h:form id="frmMenu">
				<p:panelMenu id="pnlMenu" model="#{modelMB.menuModel}" />
				<script>
                    jQuery('#frmMenu a').mouseup(function(event){jsPreventDefault(event, this)});
                </script>
			</h:form>
		</eb:layoutPane>

		<eb:layoutPane id="lyCenter" position="center">
			<h:form id="commands">
				<p:remoteCommand name="abrirOpcion"
					actionListener="#{modelMB.abrirOpcion}" update=":tabOptions" />
			</h:form>
			<p:tabView id="tabOptions" binding="#{modelMB.tabModel}"
				widgetVar="tabView" dynamic="true">
				<p:ajax event="tabChange" listener="#{modelMB.cambiarOpcion}" />
				<p:ajax event="tabClose" listener="#{modelMB.cerrarOpcion}" />
			</p:tabView>			
			<div id="tabContent"
				class="ui-panel ui-widget ui-widget-content ui-corner-all"
				style="height: 100%">
				<ui:repeat var="tab" value="#{modelMB.tabModel.children}">
					<div id="pnl_#{tab.id}" style="display: block; height:100%">
					<iframe id="iframe_#{tab.opcion.id}" src="#{tab.opcion.target}" frameborder="0" class="border0" width="100%" height="100%">                        
				        <p>Su navegador no soporta iframes</p></iframe>
			        </div>
				</ui:repeat>				
			</div>					
			<script>
            	jQuery('#tabOptions li a').mouseup(function(event){jsPreventDefault(event, this)});
        	</script>
		</eb:layoutPane>

		<eb:layoutPane id="lySouth" position="south">
			<ui:include src="south.xhtml" />
		</eb:layoutPane>
	</eb:layout>

</ui:composition>
